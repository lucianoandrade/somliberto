{"ast":null,"code":"var _jsxFileName = \"/Users/luciano/Desktop/Projetos/SomLivre/novo-frontend/src/components/features/PageContainer/PageContainer.js\";\nimport React, { useEffect } from \"react\";\nimport { Auth, API } from \"aws-amplify\";\nimport config from \"../../../config/constants\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getSiteInfo } from \"../../../store/actions/siteinfo.actions\";\nimport { setUserData } from \"../../../store/actions/user.action\";\nimport Loading from \"../../elements/Loading/Loading\";\nimport Header from '../../features/Header/Header';\nimport Footer from '../../features/Footer/Footer';\nimport AuthGuard from \"./authGuard\";\n\nconst PageContainer = props => {\n  const loading = useSelector(store => store.siteInfo.loading);\n  const siteInfo = useSelector(store => store.siteInfo.data);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!siteInfo) {\n      dispatch(getSiteInfo());\n    } // eslint-disable-next-line\n\n  }, []);\n  const [isAuth, setIsAuth] = useState({});\n  const [isUser, setIsUser] = useState({});\n\n  const get_authenticated_user = () => {\n    Auth.currentAuthenticatedUser().then(response => {\n      console.log(\"get_authenticated_user, response:\", response);\n      setIsAuth(response);\n      API.get(config.APIS.SOMLIVRE, `usuario/${response.attributes.sub}`, {}).then(response => {\n        console.log(\"get user data bem sucedido. Response: \", response);\n        dispatch(setUserData(response.data));\n        setIsUser(response);\n      }).catch(error => {\n        console.log(\"get user data falhou: \", error);\n        setIsUser(response);\n      });\n    }).catch(error => {\n      console.log(error);\n      setIsAuth(error);\n    });\n  };\n\n  useEffect(() => {\n    get_authenticated_user(); // eslint-disable-next-line\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(AuthGuard, {\n    isAuth: isAuth,\n    isUser: isUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), loading ? React.createElement(\"div\", {\n    className: \"loadingContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })) : React.createElement(React.Fragment, null, props.children), React.createElement(Footer, Object.assign({}, siteInfo, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })));\n};\n\nexport default PageContainer;","map":{"version":3,"sources":["/Users/luciano/Desktop/Projetos/SomLivre/novo-frontend/src/components/features/PageContainer/PageContainer.js"],"names":["React","useEffect","Auth","API","config","useDispatch","useSelector","getSiteInfo","setUserData","Loading","Header","Footer","AuthGuard","PageContainer","props","loading","store","siteInfo","data","dispatch","isAuth","setIsAuth","useState","isUser","setIsUser","get_authenticated_user","currentAuthenticatedUser","then","response","console","log","get","APIS","SOMLIVRE","attributes","sub","catch","error","children"],"mappings":"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","sourcesContent":["import React, {useEffect} from \"react\";\nimport { Auth, API } from \"aws-amplify\";\nimport config from \"../../../config/constants\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getSiteInfo } from \"../../../store/actions/siteinfo.actions\";\nimport { setUserData } from \"../../../store/actions/user.action\";\nimport Loading from \"../../elements/Loading/Loading\";\nimport Header from '../../features/Header/Header';\nimport Footer from '../../features/Footer/Footer';\nimport AuthGuard  from \"./authGuard\";\n\nconst PageContainer = props => {\n\n  const loading = useSelector(store => store.siteInfo.loading);\n  const siteInfo = useSelector(store => store.siteInfo.data);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if(!siteInfo){\n      dispatch(getSiteInfo());\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  const [isAuth, setIsAuth] = useState({});\n  const [isUser, setIsUser] = useState({})\n\n  const get_authenticated_user = () => {\n  Auth.currentAuthenticatedUser()\n      .then(response => {\n        console.log(\"get_authenticated_user, response:\", response);\n        setIsAuth(response)          \n        API.get(config.APIS.SOMLIVRE, `usuario/${response.attributes.sub}`, {})\n        .then(response => {\n            console.log(\"get user data bem sucedido. Response: \", response);\n            dispatch(setUserData(response.data));\n            setIsUser(response)\n        })\n        .catch(error => {\n          console.log(\"get user data falhou: \", error);\n          setIsUser(response)\n        });\n      })\n      .catch(error => {\n        console.log(error)\n        setIsAuth(error)  \n      });\n  }\n\n  useEffect(() => {\n    get_authenticated_user()\n  // eslint-disable-next-line\n  },[])\n\n  return (\n    <><AuthGuard isAuth={isAuth} isUser={isUser}/>\n      <Header/>\n        {loading ? (\n          <div className=\"loadingContainer\">\n            <Loading />\n          </div>\n        ):(\n          <>{props.children}</>\n        )}\n      <Footer {...siteInfo}/>\n    </>\n  )\n}\n\nexport default PageContainer;"]},"metadata":{},"sourceType":"module"}