{"ast":null,"code":"import React, { useEffect } from \"react\"; // import { useSelector } from \"react-redux\";\n\nimport { useHistory } from \"react-router-dom\";\nimport { setUserData } from \"../../../store/actions/user.action\";\nimport { Auth, API } from \"aws-amplify\";\nimport config from \"../../../config/constants\";\n\nconst AuthGuard = props => {\n  const userStore = useSelector(store => store.user.data || {});\n  const {\n    user = {}\n  } = userStore;\n\n  const hasRegisterCompleted = user => !!user.name && !!user.cpf;\n\n  const history = useHistory();\n  useEffect(() => {\n    switch (props.type) {\n      case \"exists\":\n        if (userStore.token) history.push(\"/\");\n        break;\n\n      case \"not-exists\":\n        if (!userStore.token) history.push(\"/login\");\n        break;\n\n      case \"incomplete-registration\":\n        if (!userStore.token) history.push(\"/login\");\n        if (!hasRegisterCompleted(user)) history.push(\"/seusdados\");\n        break;\n\n      default:\n        return;\n    }\n  }, [userStore, history, props.type, user]);\n  return React.createElement(React.Fragment, null);\n};\n\nexport default AuthGuard;","map":{"version":3,"sources":["/Users/luciano/Desktop/Projetos/SomLivre/novo-frontend/src/components/features/PageContainer/authGuard.js"],"names":["React","useEffect","useHistory","setUserData","Auth","API","config","AuthGuard","props","userStore","useSelector","store","user","data","hasRegisterCompleted","name","cpf","history","type","token","push"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,oCAA5B;AACA,SAASC,IAAT,EAAeC,GAAf,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,2BAAnB;;AAGA,MAAMC,SAAS,GAAGC,KAAK,IAAI;AAEzB,QAAMC,SAAS,GAAGC,WAAW,CAACC,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAWC,IAAX,IAAmB,EAA7B,CAA7B;AACA,QAAM;AAAED,IAAAA,IAAI,GAAG;AAAT,MAAgBH,SAAtB;;AACA,QAAMK,oBAAoB,GAAGF,IAAI,IAChC,CAAC,CAACA,IAAI,CAACG,IAAP,IAAe,CAAC,CAACH,IAAI,CAACI,GADvB;;AAEA,QAAMC,OAAO,GAAGf,UAAU,EAA1B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,YAAQO,KAAK,CAACU,IAAd;AACE,WAAK,QAAL;AACE,YAAIT,SAAS,CAACU,KAAd,EAAqBF,OAAO,CAACG,IAAR,CAAa,GAAb;AACrB;;AACF,WAAK,YAAL;AACE,YAAI,CAACX,SAAS,CAACU,KAAf,EAAsBF,OAAO,CAACG,IAAR,CAAa,QAAb;AACtB;;AACF,WAAK,yBAAL;AACE,YAAI,CAACX,SAAS,CAACU,KAAf,EAAsBF,OAAO,CAACG,IAAR,CAAa,QAAb;AACtB,YAAI,CAACN,oBAAoB,CAACF,IAAD,CAAzB,EAAiCK,OAAO,CAACG,IAAR,CAAa,YAAb;AACjC;;AACF;AACE;AAZJ;AAcD,GAfQ,EAeN,CAACX,SAAD,EAAYQ,OAAZ,EAAqBT,KAAK,CAACU,IAA3B,EAAiCN,IAAjC,CAfM,CAAT;AAiBA,SAAO,yCAAP;AACD,CA1BD;;AA4BA,eAAeL,SAAf","sourcesContent":["import React, { useEffect } from \"react\";\n// import { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { setUserData } from \"../../../store/actions/user.action\";\nimport { Auth, API } from \"aws-amplify\";\nimport config from \"../../../config/constants\";\n\n\nconst AuthGuard = props => {\n  \n  const userStore = useSelector(store => store.user.data || {});\n  const { user = {} } = userStore;\n  const hasRegisterCompleted = user =>\n   !!user.name && !!user.cpf;\n  const history = useHistory();\n\n  useEffect(() => {\n    switch (props.type) {\n      case \"exists\":\n        if (userStore.token) history.push(\"/\");\n        break;\n      case \"not-exists\":\n        if (!userStore.token) history.push(\"/login\");\n        break;\n      case \"incomplete-registration\":\n        if (!userStore.token) history.push(\"/login\");\n        if (!hasRegisterCompleted(user)) history.push(\"/seusdados\");\n        break;\n      default:\n        return;\n    }\n  }, [userStore, history, props.type, user]);\n\n  return <></>;\n};\n\nexport default AuthGuard;"]},"metadata":{},"sourceType":"module"}