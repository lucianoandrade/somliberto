{"ast":null,"code":"import React, { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nconst AuthGuard = props => {\n  const userStore = useSelector(store => store.user.data || {});\n  const {\n    user = {}\n  } = userStore;\n\n  const hasRegisterCompleted = user => user.name && user.cpf;\n\n  const history = useHistory();\n  const {\n    isAuth\n  } = props;\n  console.log(!hasRegisterCompleted(user));\n  console.log(!!!isAuth);\n  useEffect(() => {\n    switch (props.type) {\n      case \"exists\":\n        if (userStore.entity_id) history.push(\"/\");\n        break;\n\n      case \"not-exists\":\n        if (!userStore.entity_id) history.push(\"/login\");\n        break;\n\n      case \"incomplete-registration\":\n        if (!userStore.entity_id) {\n          history.push(\"/login\");\n        } else if (!hasRegisterCompleted(user) && !!!isAuth) {\n          history.push(\"/seusdados\");\n        } else {\n          return !history.push();\n        }\n\n        break;\n\n      default:\n        return;\n    }\n  }, [userStore, history, props.type, user, isAuth]);\n  return React.createElement(React.Fragment, null);\n};\n\nexport default AuthGuard;","map":{"version":3,"sources":["/Users/luciano/Desktop/Projetos/SomLivre/novo-frontend/src/components/features/PageContainer/authGuard.js"],"names":["React","useEffect","useSelector","useHistory","AuthGuard","props","userStore","store","user","data","hasRegisterCompleted","name","cpf","history","isAuth","console","log","type","entity_id","push"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,MAAMC,SAAS,GAAGC,KAAK,IAAI;AACzB,QAAMC,SAAS,GAAGJ,WAAW,CAACK,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAWC,IAAX,IAAmB,EAA7B,CAA7B;AACA,QAAM;AAAED,IAAAA,IAAI,GAAG;AAAT,MAAgBF,SAAtB;;AACA,QAAMI,oBAAoB,GAAGF,IAAI,IAAIA,IAAI,CAACG,IAAL,IAAaH,IAAI,CAACI,GAAvD;;AACA,QAAMC,OAAO,GAAGV,UAAU,EAA1B;AAEA,QAAM;AAAEW,IAAAA;AAAF,MAAaT,KAAnB;AAEAU,EAAAA,OAAO,CAACC,GAAR,CAAY,CAACN,oBAAoB,CAACF,IAAD,CAAjC;AACAO,EAAAA,OAAO,CAACC,GAAR,CAAY,CAAC,CAAC,CAACF,MAAf;AAEAb,EAAAA,SAAS,CAAC,MAAM;AACd,YAAQI,KAAK,CAACY,IAAd;AACE,WAAK,QAAL;AACE,YAAIX,SAAS,CAACY,SAAd,EAAyBL,OAAO,CAACM,IAAR,CAAa,GAAb;AACzB;;AACF,WAAK,YAAL;AACE,YAAI,CAACb,SAAS,CAACY,SAAf,EAA0BL,OAAO,CAACM,IAAR,CAAa,QAAb;AAC1B;;AACF,WAAK,yBAAL;AACE,YAAI,CAACb,SAAS,CAACY,SAAf,EAA0B;AACxBL,UAAAA,OAAO,CAACM,IAAR,CAAa,QAAb;AACD,SAFD,MAEO,IAAI,CAACT,oBAAoB,CAACF,IAAD,CAArB,IAA+B,CAAC,CAAC,CAACM,MAAtC,EAA8C;AACnDD,UAAAA,OAAO,CAACM,IAAR,CAAa,YAAb;AACD,SAFM,MAGF;AACH,iBAAO,CAACN,OAAO,CAACM,IAAR,EAAR;AACD;;AACD;;AACF;AACE;AAlBJ;AAoBD,GArBQ,EAqBN,CAACb,SAAD,EAAYO,OAAZ,EAAqBR,KAAK,CAACY,IAA3B,EAAiCT,IAAjC,EAAuCM,MAAvC,CArBM,CAAT;AAuBA,SAAO,yCAAP;AACD,CAnCD;;AAqCA,eAAeV,SAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nconst AuthGuard = props => {\n  const userStore = useSelector(store => store.user.data || {});\n  const { user = {} } = userStore;\n  const hasRegisterCompleted = user => user.name && user.cpf;\n  const history = useHistory();\n\n  const { isAuth } = props\n\n  console.log(!hasRegisterCompleted(user))\n  console.log(!!!isAuth)\n\n  useEffect(() => {\n    switch (props.type) {\n      case \"exists\":\n        if (userStore.entity_id) history.push(\"/\");\n        break;\n      case \"not-exists\":\n        if (!userStore.entity_id) history.push(\"/login\");\n        break;\n      case \"incomplete-registration\":\n        if (!userStore.entity_id) {\n          history.push(\"/login\"); \n        } else if (!hasRegisterCompleted(user) && !!!isAuth) {\n          history.push(\"/seusdados\");\n        }\n        else {\n          return !history.push()\n        }\n        break;\n      default:\n        return;\n    }\n  }, [userStore, history, props.type, user, isAuth]);\n\n  return <></>;\n};\n\nexport default AuthGuard;"]},"metadata":{},"sourceType":"module"}